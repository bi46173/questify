mutation CreateForm($data: Form_insert_input!) {
  insert_Form_one(object: $data) {
    id
    name
    favorite
    createdAt
    updatedAt
  }
}

mutation DeleteForm($formId: String!) {
  delete_Form(where: { id: { _eq: $formId } }) {
    returning {
      id
    }
  }
}

mutation StarForm($formId: String!, $favorite: Boolean!) {
  update_Form(where: { id: { _eq: $formId } }, _set: { favorite: $favorite }) {
    returning {
      id
      favorite
    }
  }
}

query MyForms($orderBy: [Form_order_by!] = { createdAt: desc }) {
  Form(order_by: $orderBy) {
    id
    name
    favorite
    createdAt
    updatedAt
  }
}

query FolderForms($folderId: String!) {
  Form(where: { folderId: { _eq: $folderId } }) {
    id
    name
    favorite
    folderId
    createdAt
    updatedAt
  }
}

query DefaultFolderForms {
  Form(where: { folderId: { _is_null: true } }) {
    id
    name
    favorite
    folderId
    createdAt
    updatedAt
  }
}

query FormData($formId: String!) {
  Form_by_pk(id: $formId) {
    id
    name
    favorite
    style
    FormItems(order_by: { order: asc }) {
      id
      formId
      name
      order
      required
      items
      image
      type
    }
  }
}
query GetForm($formId: String!) {
  Form_by_pk(id: $formId) {
    id
    name
    favorite
    style
    ownerId
    FormItems(order_by: { order: asc }) {
      id
      formId
      name
      order
      required
      items
      image
      type
    }
  }
}

mutation UpdateForm(
  $id: String!
  $name: String!
  $style: jsonb!
  $favorite: Boolean!
) {
  update_Form(
    where: { id: { _eq: $id } }
    _set: { name: $name, style: $style, favorite: $favorite, updatedAt: now }
  ) {
    returning {
      id
      name
      style
      favorite
    }
  }
}

mutation UpdateFormItems($data: [FormItem_insert_input!]!) {
  insert_FormItem(
    objects: $data
    on_conflict: {
      constraint: FormItem_pkey
      update_columns: [image, items, name, order, required, section, type]
    }
  ) {
    returning {
      id
      formId
      name
      order
      required
      items
      image
      type
    }
  }
}

mutation DeleteFormItems($ids: [String!]!) {
  delete_FormItem(where: { id: { _in: $ids } }) {
    affected_rows
  }
}

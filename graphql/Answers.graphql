query Responses($formId: String!) {
  Form_by_pk(id: $formId) {
    id
    responses
    FormItems(order_by: { order: asc }) {
      id
      name
      items
      Answers_aggregate {
        aggregate {
          count
        }
      }
      type
      Answers {
        id
        value
      }
    }
  }
}

mutation SubmitForm($formId: String!, $data: [Answer_insert_input!]!) {
  insert_Answer(objects: $data) {
    affected_rows
  }
  update_Form(where: { id: { _eq: $formId } }, _inc: { responses: 1 }) {
    affected_rows
  }
}

query GetResponsesById($responseId: String!) {
  Answer(where: { responseId: { _eq: $responseId } }) {
    id
    FormItem {
      id
    }
    value
  }
}

query FormResponses($ownerId: String!, $formId: String!) {
  Notification(
    order_by: [{ createdAt: desc }]
    where: { Form: { id: { _eq: $formId } }, ownerId: { _eq: $ownerId } }
  ) {
    id
    createdAt
    relatedId
  }
}
